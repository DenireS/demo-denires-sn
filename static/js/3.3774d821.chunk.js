(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[3],{298:function(e,a,t){e.exports={dialogs:"Dialogs_dialogs__1PoEC",dialogs__item:"Dialogs_dialogs__item__3XPTy",dialog:"Dialogs_dialog__31Tr1",dialog__name:"Dialogs_dialog__name__kHnAw",activeLink:"Dialogs_activeLink__3nhdI",messages:"Dialogs_messages__2vLQu",message:"Dialogs_message__AuSIq",post:"Dialogs_post__1tN8A"}},299:function(e,a,t){e.exports={chat:"DialogChat_chat__3jMcw",messages:"DialogChat_messages__3TRMy",message:"DialogChat_message__3xB4P",show:"DialogChat_show__2av9d",messageTitle:"DialogChat_messageTitle__1QHdv",messageDate:"DialogChat_messageDate__Kaq8x",messageTime:"DialogChat_messageTime__3Z7mY",messagesImg:"DialogChat_messagesImg__oaMfm"}},300:function(e,a,t){"use strict";t.r(a);var s=t(33),n=t(34),r=t(36),i=t(35),l=t(0),o=t.n(l),m=t(70),c=t(298),g=t.n(c),u=t(14);var d=function(e){var a=function(){e.setCurrentChat(e.id)};return o.a.createElement("div",{className:g.a.dialog},o.a.createElement("img",{src:e.img}),o.a.createElement("div",{className:g.a.dialog__name,onClick:function(){return a}},o.a.createElement(u.b,{to:"/dialogs/"+e.id,activeClassName:g.a.activeLink},e.name)))},h=t(58),_=t.n(h),p=function(e){var a=e.users.map((function(a){return o.a.createElement(d,Object.assign({name:a.userName,key:a.id,id:a.id,img:a.photos.small||_.a},e))}));return o.a.createElement("div",{className:g.a.dialogs},o.a.createElement("div",{className:g.a.dialogs__item},a))},v=t(13),f=t(12),E=function(e){return{isAuth:e.auth.isAuth}},b=t(8),D=t(30),C=t(299),N=t.n(C);var y=function(e){var a=function(e){return e.slice(11,19)}(e.date);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:N.a.message},o.a.createElement("div",{className:N.a.messageTitle},o.a.createElement("div",{className:N.a.senderName},e.senderName),o.a.createElement("div",{className:N.a.messageTime},a)),o.a.createElement("div",{className:N.a.messageBody},e.message)))},j=t(28),O=t(23),k=t(131),M=t(132);var A=Object(j.a)("textarea"),w=Object(O.a)(10),I=Object(M.a)({form:"dialogAddMessageForm"})((function(e){return o.a.createElement("form",{onSubmit:e.handleSubmit},o.a.createElement("div",null,o.a.createElement(k.a,{component:A,validate:[O.b,w],name:"newMessageBody",placeholder:"Enter your message"})),o.a.createElement("div",null,o.a.createElement("button",null,"Add Message")))})),P=function(e){var a=e.messages.map((function(e){return o.a.createElement(y,{message:e.body,key:e.id,date:e.addedAt,senderName:e.senderName})}));return o.a.createElement("div",null,o.a.createElement("div",{className:N.a.chat},o.a.createElement("div",{className:N.a.messages},a),o.a.createElement("div",{className:N.a.chatBottom},e.profile&&o.a.createElement("div",null,o.a.createElement("img",{className:N.a.messagesImg,src:e.profile.photos.small||_.a})),o.a.createElement(I,{onSubmit:function(a){e.sendMessage(e.currentChat,a.newMessageBody),a.newMessageBody=null}}))))},T=function(e){Object(r.a)(t,e);var a=Object(i.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(n.a)(t,[{key:"refreshDialogs",value:function(){if(!this.props.isAuth)return o.a.createElement(f.a,{to:"/login"});var e=this.props.match.params.userId;e?(this.props.requestMessages(e),this.props.setCurrentChat(e)):(this.props.history.push("/dialogs"),this.props.requestDialogs())}},{key:"componentDidMount",value:function(){this.refreshDialogs()}},{key:"componentDidUpdate",value:function(e,a,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshDialogs()}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.props.isFetching?o.a.createElement(D.a,null):null,this.props.match.params.userId?o.a.createElement(P,this.props):o.a.createElement(p,this.props))}}]),t}(o.a.PureComponent);a.default=Object(b.d)(Object(v.b)((function(e){return{users:e.dialogsPage.users,messages:e.dialogsPage.messages,isFetching:e.dialogsPage.isFetching,currentChat:e.dialogsPage.currentChat,profile:e.dialogsPage.profile}}),{sendMessage:m.d,requestDialogs:m.b,startChatting:m.g,setCurrentChat:m.f,requestMessages:m.c}),(function(e){var a=function(a){Object(r.a)(l,a);var t=Object(i.a)(l);function l(){return Object(s.a)(this,l),t.apply(this,arguments)}return Object(n.a)(l,[{key:"render",value:function(){return this.props.isAuth?o.a.createElement(e,this.props):o.a.createElement(f.a,{to:"/login"})}}]),l}(o.a.Component);return Object(v.b)(E)(a)}),f.g)(T)}}]);
//# sourceMappingURL=3.3774d821.chunk.js.map